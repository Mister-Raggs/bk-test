name: CI Build Workflow

on: [push]

jobs:
  ci-build:
    name: CI Build
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        python-version: ["3.11.4"]
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    
    - name: Set up Python ${{ matrix.python-version }}
      run: |
        echo "done"

  run-tests:
    name: Run Tests
    runs-on: ubuntu-latest
    needs: ci-build
    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Sleep and Run
      run: |
        echo "Sleeping for 3"
        sleep 3
  
  docker-build:
    name: Docker Build
    runs-on: ubuntu-latest
    needs: run-tests
    if: github.ref == 'refs/heads/main'  # Run only on the main branch
    strategy:
      fail-fast: false
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      
      - name: Set up QEMU
        run: |
          echo "done 2"